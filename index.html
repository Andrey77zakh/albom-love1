<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ê–ª—å–±–æ–º –¥–ª—è –ï–ª–∏–∑–∞–≤–µ—Ç—ã</title>
  <style>
    :root {
      --bg: #fdf6f0;
      --text: #333;
      --accent: #e8b4b8;
      --panel: #fff;
      --shadow: rgba(0,0,0,0.05);
      --border: #f0e0d8;
    }

    [data-theme="dark"] {
      --bg: #1a101a;
      --text: #f5f0e6;
      --accent: #c3b1e1;
      --panel: #2a202a;
      --shadow: rgba(0,0,0,0.3);
      --border: #3a303a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Lato', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 20px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* –®–∞–ø–∫–∞ */
    .header {
      text-align: center;
      padding: 40px 0;
    }

    .cover {
      width: 100%;
      max-width: 320px;
      border-radius: 12px;
      box-shadow: 0 8px 24px var(--shadow);
      margin: 0 auto 20px;
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.4rem;
      margin-bottom: 12px;
      color: var(--accent);
    }

    .dedication {
      font-size: 1.1rem;
      margin-bottom: 24px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .start-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 28px;
      font-size: 1rem;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      margin-bottom: 40px;
      transition: transform 0.2s, opacity 0.2s;
    }

    .start-btn:hover {
      transform: translateY(-2px);
      opacity: 0.95;
    }

    /* –í–∫–ª–∞–¥–∫–∏ */
    .tabs {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .tab {
      background: transparent;
      border: 2px solid var(--accent);
      color: var(--accent);
      padding: 10px 24px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }

    .tab.active {
      background: var(--accent);
      color: white;
    }

    .tab:hover:not(.active) {
      background: var(--accent);
      color: white;
    }

    /* –°–µ–∫—Ü–∏–∏ */
    .section {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–µ–∫–æ–≤ */
    .tracks-table-container {
      margin: 30px 0;
      background: var(--panel);
      border-radius: 12px;
      box-shadow: 0 4px 12px var(--shadow);
      overflow: hidden;
    }

    .tracks-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1rem;
    }

    .tracks-table th,
    .tracks-table td {
      padding: 16px 20px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .tracks-table th {
      background: var(--bg);
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      font-size: 0.9rem;
      letter-spacing: 0.5px;
    }

    .tracks-table tbody tr {
      cursor: pointer;
      transition: background 0.2s;
    }

    .tracks-table tbody tr:hover {
      background: rgba(0,0,0,0.02);
    }

    .tracks-table tbody tr.active {
      background: rgba(232, 180, 184, 0.1);
    }

    .tracks-table td:last-child {
      text-align: right;
      width: 60px;
    }

    .lyrics-toggle-btn {
      background: transparent;
      border: none;
      color: var(--accent);
      cursor: pointer;
      font-size: 1.2rem;
      padding: 4px;
      border-radius: 4px;
      transition: transform 0.2s;
    }

    .lyrics-toggle-btn:hover {
      transform: scale(1.2);
    }

    /* –¢–µ–∫—Å—Ç –ø–µ—Å–Ω–∏ */
    .lyrics-container {
      background: var(--panel);
      padding: 24px;
      border-radius: 12px;
      margin: 30px 0;
      box-shadow: 0 4px 12px var(--shadow);
      min-height: 200px;
    }

    .lyrics-line {
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
      transition: color 0.2s, transform 0.2s;
    }

    .lyrics-line.active {
      color: var(--accent);
      font-weight: 600;
      transform: scale(1.02);
    }

    /* –ü–ª–µ–µ—Ä */
    .player {
      background: var(--panel);
      padding: 24px;
      border-radius: 16px;
      margin: 40px 0;
      box-shadow: 0 4px 16px var(--shadow);
    }

    .player-title {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 600;
      font-size: 1.2rem;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }

    .btn {
      background: var(--accent);
      color: white;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s, opacity 0.2s;
    }

    .btn:hover {
      transform: scale(1.05);
      opacity: 0.95;
    }

    .btn.toggle {
      width: auto;
      padding: 0 12px;
      border-radius: 20px;
      font-size: 0.9rem;
    }

    .btn.active {
      background: #d4af37;
    }

    .seek-container, .volume-container {
      flex: 1;
      min-width: 200px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    input[type="range"] {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    .time {
      font-size: 0.9rem;
      min-width: 90px;
      text-align: center;
    }

    /* –°—Ç–∏—Ö–∏ */
    .poem-item {
      background: var(--panel);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px var(--shadow);
      cursor: pointer;
    }

    .poem-title {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 8px;
      color: var(--accent);
    }

    .poem-date {
      font-size: 0.9rem;
      opacity: 0.8;
      margin-bottom: 12px;
    }

    .poem-text {
      line-height: 1.8;
      white-space: pre-line;
      display: none;
      padding-top: 16px;
      border-top: 1px solid var(--border);
      animation: fadeIn 0.5s ease;
    }

    .poem-item.active .poem-text {
      display: block;
    }

    /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--panel);
      border: 2px solid var(--accent);
      color: var(--accent);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px var(--shadow);
      z-index: 100;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤ */
    @media (max-width: 768px) {
      .header {
        padding: 30px 0;
      }

      h1 {
        font-size: 2rem;
      }

      .cover {
        max-width: 260px;
      }

      .seek-container, .volume-container {
        min-width: 100%;
      }

      .tracks-table th, .tracks-table td {
        padding: 12px 10px;
        font-size: 0.95rem;
      }

      .tracks-table th:nth-child(2) {
        width: 60%;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 12px;
      }

      .tabs {
        gap: 10px;
      }

      .tab {
        padding: 8px 16px;
        font-size: 0.9rem;
      }

      .btn {
        width: 40px;
        height: 40px;
      }

      .tracks-table th, .tracks-table td {
        padding: 10px 8px;
        font-size: 0.9rem;
      }

      .tracks-table th:nth-child(1),
      .tracks-table th:nth-child(3),
      .tracks-table th:nth-child(4) {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" id="themeToggle">üåô</button>

  <div class="container">
    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
      <img src="images/albom_photo.png" alt="–û–±–ª–æ–∂–∫–∞ –∞–ª—å–±–æ–º–∞" class="cover" id="albumCover">
      <h1>–ê–ª—å–±–æ–º –¥–ª—è –ï–ª–∏–∑–∞–≤–µ—Ç—ã</h1>
      <p class="dedication">–õ–∏–∑–∞, —ç—Ç–æ—Ç –∞–ª—å–±–æ–º ‚Äî —Å–æ–±—Ä–∞–Ω–∏–µ –ø–µ—Å–µ–Ω, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–∞–ø–∏—Å–∞–ª –¥–ª—è —Ç–µ–±—è. –ó–¥–µ—Å—å –∂–µ ‚Äî –≤—Å–µ —Å—Ç–∏—Ö–∏, —á—Ç–æ —è —Ç–µ–±–µ –ø–æ—Å–≤—è—Ç–∏–ª. –°–ª—É—à–∞–π. –ß–∏—Ç–∞–π. –Ø —Ä—è–¥–æ–º.</p>
      <button class="start-btn" id="startBtn">‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Å–ª—É—à–∞—Ç—å</button>
    </header>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="tabs">
      <button class="tab active" data-tab="tracks">üéµ –ü–µ—Å–Ω–∏</button>
      <button class="tab" data-tab="poems">üìú –°—Ç–∏—Ö–∏</button>
    </div>

    <!-- –°–µ–∫—Ü–∏—è: –ü–µ—Å–Ω–∏ -->
    <section id="tracksSection" class="section active">
      <div class="tracks-table-container">
        <table class="tracks-table">
          <thead>
            <tr>
              <th>‚Ññ</th>
              <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
              <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="trackList">
            <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω JS -->
          </tbody>
        </table>
      </div>

      <div class="lyrics-container" id="lyricsContainer" style="display: none;">
        <!-- –¢–µ–∫—Å—Ç –ø–µ—Å–Ω–∏ –±—É–¥–µ—Ç –∑–¥–µ—Å—å, –Ω–æ —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
      </div>

      <div class="player">
        <div class="player-title">–ü–ª–µ–µ—Ä</div>
        <div class="controls">
          <button class="btn" id="playBtn">‚ñ∂Ô∏è</button>
          <button class="btn" id="prevBtn">‚èÆÔ∏è</button>
          <button class="btn" id="nextBtn">‚è≠Ô∏è</button>
          <button class="btn toggle" id="lyricsToggle">üìñ –¢–µ–∫—Å—Ç</button>
          <div class="seek-container">
            <span class="time" id="currentTime">0:00</span>
            <input type="range" id="seekBar" value="0" min="0" max="100" step="0.1">
            <span class="time" id="duration">0:00</span>
          </div>
          <div class="volume-container">
            <span>üîä</span>
            <input type="range" id="volumeBar" value="100" min="0" max="100">
          </div>
          <button class="btn toggle" id="loopBtn">üîÅ</button>
          <button class="btn toggle" id="shuffleBtn">üîÄ</button>
        </div>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è: –°—Ç–∏—Ö–∏ -->
    <section id="poemsSection" class="section">
      <div id="poemsContainer">
        <!-- –°—Ç–∏—Ö–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JS -->
      </div>
    </section>
  </div>

  <script>
    // ==================================================
    // –î–ê–ù–ù–´–ï ‚Äî –ú–û–ñ–ù–û –†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨
    // ==================================================

    const tracks = [
      {
        title: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏",
        src: "audio/–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏ 1.mp3", // ‚Üê —Ç–≤–æ–π –ø—É—Ç—å
        duration: "3:00",
        lyrics: [
          { time: 5,    text: "–ì–æ–¥ –∑–∞ –≥–æ–¥–æ–º —à—ë–ª, –∏ –º—ã —É—á–∏–ª–∏—Å—å –¥—Ä—É–≥ —É –¥—Ä—É–≥–∞," },
          { time: 10,   text: "–ö—Ç–æ —è, –∏ –∫—Ç–æ —Ç—ã ‚Äî –Ω–µ–∑–Ω–∞–Ω–∏–µ –±—ã–ª–æ —Ç–æ–ª—å–∫–æ –º—É–∫–æ–π." },
          { time: 15,   text: "–ß—É–≤—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ –∫—Ä–∞–π, —á—É–≤—Å—Ç–≤–∞ ‚Äî —ç—Ç–æ —Ä–∞–π!" },

          { time: 22,   text: "–ú—ã –ø–∏—à–µ–º –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é, –∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è" },
          { time: 28,   text: "–ù–∞—Å –≤ —Å–µ–º—å—é —Å–≤–æ—é –≤–µ–¥—ë—Ç." },
          { time: 32,   text: "–õ—é–±–æ–≤—å —Å–µ—Ä–¥—Ü–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–∏–ª–∞, –∂–∏–∑–Ω—å –Ω–∞–º —É—Å—Ç—Ä–æ–∏–ª–∞." },
          { time: 39,   text: "–ü—É—Å—Ç—å –æ–Ω–∞ –Ω–∞—Å –∏ –Ω–µ—Å—ë—Ç!" },
          { time: 42,   text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏," },
          { time: 48,   text: "–í–µ—á–Ω–æ–π –ª—é–±–≤–∏!" },

          { time: 54,   text: "–ù–∞—à–∞ –∂–∏–∑–Ω—å –∏–¥—ë—Ç, –±—ã—Ç—å –æ–±–µ—â–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π," },
          { time: 59,   text: "–ò–∑ –∑–Ω–∞–∫–æ–º—ã—Ö –≤–¥—Ä—É–≥ –º—ã —Å—Ç–∞–ª–∏ –∂–µ–Ω–∏—Ö–æ–º, –Ω–µ–≤–µ—Å—Ç–æ–π." },
          { time: 64,   text: "–í–º–µ—Å—Ç–µ –Ω–∞–≤—Å–µ–≥–¥–∞! –ú—ã –≤–º–µ—Å—Ç–µ –ø–æ—Å–ª–µ ¬´–¥–∞¬ª!" },
          { time: 71,   text: "–ú—ã –ø–∏—à–µ–º –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é, –∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è" },
          { time: 77,   text: "–ù–∞—Å –≤ —Å–µ–º—å—é —Å–≤–æ—é –≤–µ–¥—ë—Ç." },
          { time: 82,   text: "–õ—é–±–æ–≤—å —Å–µ—Ä–¥—Ü–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–∏–ª–∞, –∂–∏–∑–Ω—å –Ω–∞–º —É—Å—Ç—Ä–æ–∏–ª–∞." },
          { time: 88,   text: "–ü—É—Å—Ç—å –æ–Ω–∞ –Ω–∞—Å –∏ –Ω–µ—Å—ë—Ç!" },
          { time: 92,   text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏," },
          { time: 97,   text: "–í–µ—á–Ω–æ–π –ª—é–±–≤–∏!" },
          { time: 102,  text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏," },
          { time: 107,  text: "–í–µ—á–Ω–æ–π –ª—é–±–≤–∏!" },
          { time: 113,  text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏ –∏ –¥—Ä—É–∂–±—ã," },
          { time: 118,  text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π —Å—É–¥—å–±—ã –Ω–∞–º–Ω–æ–≥–æ –≥–ª—É–±–∂–µ." },
          { time: 124,  text: "–î–∞–≤–∞–π –ø—Ä–æ–∂–∏–≤—ë–º" },
          { time: 129,  text: "–í—Å—é –∂–∏–∑–Ω—å –ª–∏—à—å –≤–¥–≤–æ—ë–º!" },

          { time: 134,  text: "–ú—ã –ø–∏—à–µ–º –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é, –∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è" },
          { time: 140,  text: "–ù–∞—Å –≤ —Å–µ–º—å—é —Å–≤–æ—é –≤–µ–¥—ë—Ç." },
          { time: 144,  text: "–õ—é–±–æ–≤—å —Å–µ—Ä–¥—Ü–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–∏–ª–∞, –∂–∏–∑–Ω—å –Ω–∞–º —É—Å—Ç—Ä–æ–∏–ª–∞." },
          { time: 150,  text: "–ü—É—Å—Ç—å –æ–Ω–∞ –Ω–∞—Å –∏ –Ω–µ—Å—ë—Ç!" },
          { time: 154,  text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏," },
          { time: 159,  text: "–í–µ—á–Ω–æ–π –ª—é–±–≤–∏!" },
          { time: 164,  text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏," },
          { time: 169,  text: "–í–µ—á–Ω–æ–π –ª—é–±–≤–∏!" },
          { time: 174,  text: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—à–µ–π –ª—é–±–≤–∏," },
          { time: 180,  text: "–í–µ—á–Ω–æ–π –ª—é–±–≤–∏!" }
        ]
      }
      // –î–æ–±–∞–≤–ª—è–π —Å—é–¥–∞ –¥—Ä—É–≥–∏–µ —Ç—Ä–µ–∫–∏ –ø–æ —Ç–∞–∫–æ–º—É –∂–µ —à–∞–±–ª–æ–Ω—É
    ];

    const poems = [
      {
        title: "–¢—ã ‚Äî –º–æ–π —Ä–∞—Å—Å–≤–µ—Ç",
        date: "12 –º–∞—è 2024",
        text: `–¢—ã ‚Äî –º–æ–π —Ä–∞—Å—Å–≤–µ—Ç –≤ –≥–ª—É—Ö—É—é –Ω–æ—á—å,
–ú–æ–π —Ç–∏—Ö–∏–π —Å–≤–µ—Ç, –º–æ—è –ø–µ—á–∞–ª—å –∏ –º–æ—â—å.
–¢—ã ‚Äî –≤–¥–æ—Ö, —á—Ç–æ —è –¥–∞–≤–Ω–æ –Ω–µ –º–æ–≥ –≤–¥–æ—Ö–Ω—É—Ç—å,
–¢—ã ‚Äî —Å–º—ã—Å–ª, —á—Ç–æ –Ω–∞—É—á–∏–ª –º–æ–π –º–∏—Ä –≤–µ—Ä–Ω—É—Ç—å.`
      },
      {
        title: "–ë–µ–∑ —Ç–µ–±—è",
        date: "3 –∏—é–Ω—è 2024",
        text: `–ë–µ–∑ —Ç–µ–±—è ‚Äî –∫–∞–∫ –±–µ–∑ –≤–æ–∑–¥—É—Ö–∞,
–ö–∞–∫ –±–µ–∑ –∑–≤—ë–∑–¥ –Ω–∞ –Ω–µ–±–µ.
–ö–∞–∫ –±–µ–∑ –ø–µ—Å–Ω–∏ –≤ –º—É–∑—ã–∫–µ,
–ö–∞–∫ –±–µ–∑ —Ö–ª–µ–±–∞ –∑–∞ —Å—Ç–æ–ª–æ–º.
–¢—ã ‚Äî –º–æ—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å.
–¢—ã ‚Äî –º–æ—è —Ç–æ—á–∫–∞ –æ–ø–æ—Ä—ã.
–¢—ã ‚Äî –º–æ—è —Ç–∏—à–∏–Ω–∞,
–ö–æ–≥–¥–∞ –≤–µ—Å—å –º–∏—Ä –∫—Ä–∏—á–∏—Ç.`
      }
      // –î–æ–±–∞–≤–ª—è–π —Å—é–¥–∞ —Å–≤–æ–∏ —Å—Ç–∏—Ö–∏
    ];

    // ==================================================
    // –õ–û–ì–ò–ö–ê ‚Äî –ù–ò–ñ–ï –ú–ï–ù–Ø–¢–¨ –ù–ï –ù–£–ñ–ù–û
    // ==================================================

    // DOM
    const themeToggle = document.getElementById('themeToggle');
    const startBtn = document.getElementById('startBtn');
    const tabs = document.querySelectorAll('.tab');
    const sections = document.querySelectorAll('.section');
    const trackListEl = document.getElementById('trackList');
    const lyricsContainer = document.getElementById('lyricsContainer');
    const poemsContainer = document.getElementById('poemsContainer');

    // –ü–ª–µ–µ—Ä
    const audio = new Audio();
    const playBtn = document.getElementById('playBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const seekBar = document.getElementById('seekBar');
    const currentTimeEl = document.getElementById('currentTime');
    const durationEl = document.getElementById('duration');
    const volumeBar = document.getElementById('volumeBar');
    const loopBtn = document.getElementById('loopBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const lyricsToggleBtn = document.getElementById('lyricsToggle');

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ
    let currentTrackIndex = 0;
    let isPlaying = false;
    let isLoop = false;
    let isShuffle = false;
    let isLyricsVisible = false;
    let shuffledIndices = [];

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    function init() {
      renderTrackList();
      renderPoems();
      setupEventListeners();
      loadTheme();
      loadProgress();
    }

    // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–∫–æ–≤
    function renderTrackList() {
      trackListEl.innerHTML = '';
      tracks.forEach((track, index) => {
        const tr = document.createElement('tr');
        tr.className = index === currentTrackIndex ? 'active' : '';
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${track.title}</td>
          <td>${track.duration}</td>
          <td><button class="lyrics-toggle-btn" data-index="${index}">üìñ</button></td>
        `;
        tr.addEventListener('click', (e) => {
          if (!e.target.classList.contains('lyrics-toggle-btn')) {
            playTrack(index);
          }
        });
        tr.querySelector('.lyrics-toggle-btn').addEventListener('click', (e) => {
          e.stopPropagation();
          playTrack(index);
          toggleLyrics();
        });
        trackListEl.appendChild(tr);
      });
    }

    // –†–µ–Ω–¥–µ—Ä —Å—Ç–∏—Ö–æ–≤
    function renderPoems() {
      poemsContainer.innerHTML = '';
      poems.forEach(poem => {
        const div = document.createElement('div');
        div.className = 'poem-item';
        div.innerHTML = `
          <div class="poem-title">${poem.title}</div>
          <div class="poem-date">${poem.date}</div>
          <div class="poem-text">${poem.text}</div>
        `;
        div.addEventListener('click', function() {
          this.classList.toggle('active');
        });
        poemsContainer.appendChild(div);
      });
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–±—ã—Ç–∏–π
    function setupEventListeners() {
      // –í–∫–ª–∞–¥–∫–∏
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          const tabId = tab.dataset.tab;
          sections.forEach(section => section.classList.remove('active'));
          document.getElementById(`${tabId}Section`).classList.add('active');
        });
      });

      // –ü–ª–µ–µ—Ä
      startBtn.addEventListener('click', () => {
        playTrack(0);
        document.querySelector('.player').scrollIntoView({ behavior: 'smooth' });
      });

      playBtn.addEventListener('click', togglePlay);
      prevBtn.addEventListener('click', playPrev);
      nextBtn.addEventListener('click', playNext);
      loopBtn.addEventListener('click', toggleLoop);
      shuffleBtn.addEventListener('click', toggleShuffle);
      lyricsToggleBtn.addEventListener('click', toggleLyrics);

      seekBar.addEventListener('input', () => {
        const seekTime = (seekBar.value / 100) * audio.duration;
        audio.currentTime = seekTime;
      });

      volumeBar.addEventListener('input', () => {
        audio.volume = volumeBar.value / 100;
        localStorage.setItem('volume', audio.volume);
      });

      audio.addEventListener('timeupdate', updateProgress);
      audio.addEventListener('ended', () => {
        if (isLoop) {
          audio.currentTime = 0;
          audio.play();
        } else {
          playNext();
        }
      });

      // –¢–µ–º–∞
      themeToggle.addEventListener('click', toggleTheme);
    }

    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
    function playTrack(index) {
      if (isShuffle && shuffledIndices.length > 0) {
        currentTrackIndex = (shuffledIndices.indexOf(index) === -1 ? 0 : shuffledIndices.indexOf(index));
      } else {
        currentTrackIndex = index;
      }

      const track = tracks[currentTrackIndex];
      audio.src = track.src;
      audio.play();
      isPlaying = true;
      playBtn.textContent = '‚è∏Ô∏è';

      // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–∫
      document.querySelectorAll('.tracks-table tbody tr').forEach((row, i) => {
        row.classList.toggle('active', i === currentTrackIndex);
      });

      // –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –≤–∏–¥–µ–Ω
      if (isLyricsVisible) {
        updateLyrics();
      }

      // –û–±–Ω–æ–≤–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
      audio.addEventListener('loadedmetadata', () => {
        durationEl.textContent = formatTime(audio.duration);
      }, { once: true });
    }

    function togglePlay() {
      if (isPlaying) {
        audio.pause();
        playBtn.textContent = '‚ñ∂Ô∏è';
      } else {
        audio.play();
        playBtn.textContent = '‚è∏Ô∏è';
      }
      isPlaying = !isPlaying;
    }

    function playPrev() {
      if (isShuffle && shuffledIndices.length > 0) {
        currentTrackIndex = (currentTrackIndex - 1 + shuffledIndices.length) % shuffledIndices.length;
        playTrack(shuffledIndices[currentTrackIndex]);
      } else {
        currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
        playTrack(currentTrackIndex);
      }
    }

    function playNext() {
      if (isShuffle && shuffledIndices.length > 0) {
        currentTrackIndex = (currentTrackIndex + 1) % shuffledIndices.length;
        playTrack(shuffledIndices[currentTrackIndex]);
      } else {
        currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
        playTrack(currentTrackIndex);
      }
    }

    function toggleLoop() {
      isLoop = !isLoop;
      loopBtn.classList.toggle('active', isLoop);
      audio.loop = isLoop;
    }

    function toggleShuffle() {
      isShuffle = !isShuffle;
      shuffleBtn.classList.toggle('active', isShuffle);
      if (isShuffle) {
        shuffledIndices = [...Array(tracks.length).keys()].sort(() => Math.random() - 0.5);
      } else {
        shuffledIndices = [];
      }
    }

    function toggleLyrics() {
      isLyricsVisible = !isLyricsVisible;
      lyricsContainer.style.display = isLyricsVisible ? 'block' : 'none';
      lyricsToggleBtn.textContent = isLyricsVisible ? 'üìñ –°–∫—Ä—ã—Ç—å —Ç–µ–∫—Å—Ç' : 'üìñ –¢–µ–∫—Å—Ç';
      if (isLyricsVisible) {
        updateLyrics();
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Ç–µ–∫—Å—Ç–∞
    function updateProgress() {
      const percent = (audio.currentTime / audio.duration) * 100 || 0;
      seekBar.value = percent;
      currentTimeEl.textContent = formatTime(audio.currentTime);

      if (isLyricsVisible) {
        const currentLyrics = tracks[currentTrackIndex]?.lyrics || [];
        const currentLineIndex = currentLyrics.findIndex((line, i) => {
          return i === currentLyrics.length - 1 || audio.currentTime < currentLyrics[i + 1].time;
        });

        document.querySelectorAll('.lyrics-line').forEach((line, i) => {
          line.classList.toggle('active', i === currentLineIndex);
          if (i === currentLineIndex) {
            line.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        });
      }
    }

    function updateLyrics() {
      const lyrics = tracks[currentTrackIndex]?.lyrics || [];
      lyricsContainer.innerHTML = '';
      lyrics.forEach(line => {
        const div = document.createElement('div');
        div.className = 'lyrics-line';
        div.textContent = line.text;
        div.dataset.time = line.time;
        div.addEventListener('click', () => {
          audio.currentTime = line.time;
        });
        lyricsContainer.appendChild(div);
      });
    }

    // –£—Ç–∏–ª–∏—Ç—ã
    function formatTime(seconds) {
      const min = Math.floor(seconds / 60);
      const sec = Math.floor(seconds % 60).toString().padStart(2, '0');
      return `${min}:${sec}`;
    }

    function toggleTheme() {
      const isDark = document.body.getAttribute('data-theme') === 'dark';
      document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
      themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', isDark ? 'light' : 'dark');
    }

    function loadTheme() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.body.setAttribute('data-theme', savedTheme);
      themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }

    function loadProgress() {
      const savedVolume = localStorage.getItem('volume');
      if (savedVolume) {
        audio.volume = parseFloat(savedVolume);
        volumeBar.value = audio.volume * 100;
      }
    }

    // –ó–∞–ø—É—Å–∫
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>